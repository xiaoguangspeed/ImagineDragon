<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>

<body onload="main()">
  <div>
    <!-- <h1>learn webgl</h1> -->
    <canvas id="gl" width="600" height="300">

    </canvas>
  </div>


  <script>
    function createShader(gl, sourceCode, type) {
      // Compiles either a shader of type gl.VERTEX_SHADER or gl.FRAGMENT_SHADER
      var shader = gl.createShader(type);
      gl.shaderSource(shader, sourceCode);
      gl.compileShader(shader);

      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
        var info = gl.getShaderInfoLog(shader);
        throw "Could not compile WebGL program. \n\n" + info;
      }
      return shader;
    }
    function main() {
      let canvas = document.getElementById('gl')
      let gl = canvas.getContext('webgl')
      gl.clearColor(1.0, 0.5, 1.0, 1.0)
      gl.clear(gl.COLOR_BUFFER_BIT)
      let program = gl.createProgram()
      let vertexShaderSource = `
        attribute vec4 a_position;
        attribute float a_pointSize;
        void main() {
          gl_Position = a_position;
          gl_PointSize = a_pointSize;
        }
      `
      let fragShaderSource = `
        void main() {
          gl_FragColor = vec4(1.0,0.0,0.0,1.0);
        }
      `
      
      let a_position = gl.getAttribLocation(program, 'a_position');
      let a_pointSize = gl.getAttribLocation(program, 'a_pointSize');

      gl.vertexAttrib3f(a_position,0.0,0.0,0.0)
      gl.vertexAttrib1f(a_pointSize,5.0)
      let vertexShader = createShader(gl,vertexShaderSource,gl.VERTEX_SHADER)
      let fragShader = createShader(gl,fragShaderSource,gl.FRAGMENT_SHADER)
      gl.attachShader(program, vertexShader)
      gl.attachShader(program, fragShader)
      gl.linkProgram(program)
      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
        var info = gl.getProgramInfoLog(program);
        throw 'WebGL program 不能编译. \n\n' + info;
      }

      // Use the program
      gl.useProgram(program);

      // Bind existing attribute data
      // gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
      // gl.enableVertexAttribArray(attributeLocation);
      // gl.vertexAttribPointer(attributeLocation, 3, gl.FLOAT, false, 0, 0);

      // Draw a single triangle
      gl.drawArrays(gl.POINTS, 0, 3);
    }

    // main()
  </script>
</body>

</html>